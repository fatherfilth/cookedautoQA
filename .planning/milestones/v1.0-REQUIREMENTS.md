# Requirements Archive: v1.0 MVP

**Archived:** 2026-02-16
**Status:** SHIPPED

---

# Requirements: cooked-synthetic-monitor

**Defined:** 2026-02-15
**Core Value:** Detect breakages in key user flows on cooked.com before real users hit them, with fast alerts and actionable failure artifacts.

## v1 Requirements — ALL SHIPPED

Requirements for initial release. All 43 requirements delivered in v1.0.

### Infrastructure

- [x] **INFRA-01**: Project scaffolded with package.json, tsconfig.json, and Playwright config
- [x] **INFRA-02**: Folder structure follows convention (tests/smoke/, tests/helpers/, scripts/, docs/)
- [x] **INFRA-03**: Central test helper provides consistent navigation, configurable timeouts, and auto-retry for flaky steps
- [x] **INFRA-04**: Screenshot, video, and trace capture on test failure only (not on success)
- [x] **INFRA-05**: Page Object Model implemented for key pages (lobby, login, registration, game detail, account)
- [x] **INFRA-06**: All secrets and config managed via environment variables (BASE_URL, SLACK_WEBHOOK_URL, TEST_USER_EMAIL, TEST_USER_PASSWORD)
- [x] **INFRA-07**: Headless by default, headed mode available via env var for local debugging

### Smoke Tests

- [x] **SMOKE-01**: Homepage loads and key hero element is present
- [x] **SMOKE-02**: Top navigation works — user can reach at least 2 major destinations
- [x] **SMOKE-03**: Lobby page loads with game categories visible
- [x] **SMOKE-04**: Search flow works — search term returns results, user can open a result

### Game Monitoring

- [x] **GAME-01**: Slot game launches successfully (iframe loads and game initializes)
- [x] **GAME-02**: Table game launches successfully (iframe loads and game initializes)
- [x] **GAME-03**: Live dealer game launches successfully (iframe loads and game initializes)
- [x] **GAME-04**: Game launch test uses representative game from each category with configurable game IDs

### Auth Tests

- [x] **AUTH-01**: User can log in with email/password and reach account page
- [x] **AUTH-02**: Login session persists across page navigation
- [x] **AUTH-03**: Registration flow completes step-by-step (stop before real account creation or use test mode)

### Social & Live Features

- [x] **SOCIAL-01**: Chat WebSocket connection establishes successfully
- [x] **SOCIAL-02**: Chat messages are visible in the chat interface
- [x] **SOCIAL-03**: Tipping flow works end-to-end (initiate tip → confirm → success state)
- [x] **SOCIAL-04**: "Latest and Greatest" messages/promotions display on the appropriate page

### Crypto Integration

- [x] **CRYPTO-01**: Swapped.com buy crypto flow is reachable and loads correctly
- [x] **CRYPTO-02**: Crypto buy flow progresses through steps (stop before real purchase)

### Reliability

- [x] **RELY-01**: Retry logic retries failed steps 2-3 times before marking as failure
- [x] **RELY-02**: Stable selector strategy documented — data-testid preferred, fallback selectors for pages without them
- [x] **RELY-03**: All waits are explicit (waitForSelector, waitForResponse) — no networkidle or arbitrary sleep
- [x] **RELY-04**: Tests categorized by criticality (CRITICAL, WARNING) for severity-based alerting

### Alerting

- [x] **ALERT-01**: Slack notification sent on test failure with failing test names and GitHub Actions run link
- [x] **ALERT-02**: Slack message includes links to failure artifacts (screenshots, traces)
- [x] **ALERT-03**: Alerts are severity-based — CRITICAL flows (game launch, login, registration) vs WARNING flows (tipping, Latest & Greatest)
- [x] **ALERT-04**: Consecutive failure threshold — require 2+ failures before alerting to reduce noise

### Reporting

- [x] **REPORT-01**: JSON summary generated per run (timestamp, commit SHA, test name, pass/fail, duration, error summary)
- [x] **REPORT-02**: Playwright HTML report generated and uploaded as artifact

### CI/CD

- [x] **CICD-01**: GitHub Actions workflow runs on schedule (cron every 30 minutes)
- [x] **CICD-02**: GitHub Actions workflow runs on push to main
- [x] **CICD-03**: GitHub Actions workflow runs on workflow_dispatch (manual trigger)
- [x] **CICD-04**: Playwright report, traces, videos, and screenshots uploaded as GitHub Actions artifacts
- [x] **CICD-05**: Node modules cached for faster runs
- [x] **CICD-06**: Concurrency control prevents overlapping scheduled runs
- [x] **CICD-07**: Reasonable timeouts set at workflow and test level

### Documentation

- [x] **DOCS-01**: README covers: how to run locally, how to set env vars, how to add new tests, troubleshooting flakiness
- [x] **DOCS-02**: docs/RUNBOOK.md provides alert triage checklist (what to check, escalation paths, common false positives)

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| INFRA-01 | Phase 1 | Shipped v1.0 |
| INFRA-02 | Phase 1 | Shipped v1.0 |
| INFRA-03 | Phase 1 | Shipped v1.0 |
| INFRA-04 | Phase 1 | Shipped v1.0 |
| INFRA-05 | Phase 1 | Shipped v1.0 |
| INFRA-06 | Phase 1 | Shipped v1.0 |
| INFRA-07 | Phase 1 | Shipped v1.0 |
| RELY-01 | Phase 1 | Shipped v1.0 |
| RELY-02 | Phase 1 | Shipped v1.0 |
| RELY-03 | Phase 1 | Shipped v1.0 |
| RELY-04 | Phase 1 | Shipped v1.0 |
| SMOKE-01 | Phase 2 | Shipped v1.0 |
| SMOKE-02 | Phase 2 | Shipped v1.0 |
| SMOKE-03 | Phase 2 | Shipped v1.0 |
| SMOKE-04 | Phase 2 | Shipped v1.0 |
| GAME-01 | Phase 2 | Shipped v1.0 |
| GAME-02 | Phase 2 | Shipped v1.0 |
| GAME-03 | Phase 2 | Shipped v1.0 |
| GAME-04 | Phase 2 | Shipped v1.0 |
| AUTH-01 | Phase 2 | Shipped v1.0 |
| AUTH-02 | Phase 2 | Shipped v1.0 |
| AUTH-03 | Phase 2 | Shipped v1.0 |
| SOCIAL-01 | Phase 3 | Shipped v1.0 |
| SOCIAL-02 | Phase 3 | Shipped v1.0 |
| SOCIAL-03 | Phase 3 | Shipped v1.0 |
| SOCIAL-04 | Phase 3 | Shipped v1.0 |
| CRYPTO-01 | Phase 4 | Shipped v1.0 |
| CRYPTO-02 | Phase 4 | Shipped v1.0 |
| ALERT-01 | Phase 5 | Shipped v1.0 |
| ALERT-02 | Phase 5 | Shipped v1.0 |
| ALERT-03 | Phase 5 | Shipped v1.0 |
| ALERT-04 | Phase 5 | Shipped v1.0 |
| REPORT-01 | Phase 5 | Shipped v1.0 |
| REPORT-02 | Phase 5 | Shipped v1.0 |
| CICD-01 | Phase 5 | Shipped v1.0 |
| CICD-02 | Phase 5 | Shipped v1.0 |
| CICD-03 | Phase 5 | Shipped v1.0 |
| CICD-04 | Phase 5 | Shipped v1.0 |
| CICD-05 | Phase 5 | Shipped v1.0 |
| CICD-06 | Phase 5 | Shipped v1.0 |
| CICD-07 | Phase 5 | Shipped v1.0 |
| DOCS-01 | Phase 6 | Shipped v1.0 |
| DOCS-02 | Phase 6 | Shipped v1.0 |

**Coverage:** 43/43 requirements shipped

## v2 Requirements (Deferred)

### Enhanced Alerting

- **ALERT-05**: Email alerting via SMTP env vars (ALERT_EMAIL_TO, ALERT_EMAIL_FROM, SMTP settings)
- **ALERT-06**: Alert deduplication — suppress repeated alerts for same failing test within time window

### Extended Monitoring

- **GAME-05**: Game provider health matrix — aggregate launch success rates by provider
- **GAME-06**: Sportsbook line availability — verify betting odds load and update
- **SOCIAL-05**: Live dealer video stream validation
- **MONITOR-01**: HTTP/API endpoint health checks independent of browser tests
- **MONITOR-02**: SSL/TLS certificate expiration monitoring
- **MONITOR-03**: Response time metrics collection and trending
- **MONITOR-04**: Uptime percentage tracking and SLA reporting

### Infrastructure

- **INFRA-08**: Multi-location monitoring (run from multiple geographic regions)
- **INFRA-09**: Lobby performance benchmarking (Core Web Vitals via Lighthouse)

---
*Requirements defined: 2026-02-15*
*Archived: 2026-02-16 after v1.0 milestone completion*
